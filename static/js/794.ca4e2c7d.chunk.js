"use strict";(self.webpackChunkguitar_store_locator=self.webpackChunkguitar_store_locator||[]).push([[794],{794:(e,o,s)=>{s.r(o),s.d(o,{default:()=>a});var t=s(43),r=s(579);const n="localhost"===window.location.hostname?"http://localhost:5000":"https://guitar-store-locator.onrender.com",a=e=>{var o;let{marker:s,onClose:a,directionsUrl:i}=e;const[l,c]=(0,t.useState)(!1),[d,h]=(0,t.useState)(""),u=(0,t.useCallback)((async()=>{c(!0),h("");try{const e=s.place_id||s.placeId,o=s.name,t=s.vicinity||s.address,r=s.formatted_phone_number||s.phone,a=s.website;let i,l;if("google"===s.source)i=s.geometry.location.lat,l=s.geometry.location.lng;else if("mongodb"===s.source)i=s.location.coordinates[1],l=s.location.coordinates[0];else{if(!s.geometry||!s.geometry.location)return console.error("Could not determine coordinates for saving."),h("Error: Could not determine store location."),void c(!1);i=s.geometry.location.lat,l=s.geometry.location.lng}const d={placeId:e,name:o,address:t,phone:r,website:a,latitude:i,longitude:l},u=await fetch(`${n}/api/stores`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(!u.ok){const e=await u.json();throw new Error(e.message||`HTTP error! status: ${u.status}`)}const g=await u.json();console.log("Store saved successfully:",g),h("Store saved successfully!")}catch(e){console.error("Error saving store:",e),e.message.includes("Store with this Place ID already exists")?h("This store is already saved!"):h(`Failed to save store: ${e.message||"Unknown error"}`)}finally{c(!1)}}),[s]),g="google"===s.source;return(0,r.jsxs)("div",{className:"info-window",children:[(0,r.jsx)("button",{className:"close-btn",onClick:a,children:"\xd7"}),(0,r.jsx)("h3",{children:s.name}),(0,r.jsx)("p",{children:s.vicinity||s.address||"No address available"}),void 0!==(null===(o=s.opening_hours)||void 0===o?void 0:o.open_now)&&(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Open?"})," ",s.opening_hours.open_now?"Yes":"No"]}),s.phone&&(0,r.jsxs)("p",{children:["Phone: ",s.phone]}),s.website&&(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",children:"Website"})}),(0,r.jsx)("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:"Directions"}),g&&(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:"save-to-stores-button",onClick:u,disabled:l,children:l?"Saving...":"Save to My Stores"}),d&&(0,r.jsx)("p",{className:"save-message",children:d})]})]})}}}]);
//# sourceMappingURL=794.ca4e2c7d.chunk.js.map